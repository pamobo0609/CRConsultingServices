$axure.internal(function(e){e.adaptive={};$axure.utils.makeBindable(e.adaptive,["viewChanged"]);var t=true;var n;var r;var i=[];var s;var o=false;e.adaptive.loadFinished=function(){if(o)return;o=true;if(e.adaptive.currentViewId)e.viewChangePageAndMasters();else e.postAdaptiveViewChanged()};var u=function(){if(!t)return;var e=$(window);var n=e.height();var r=e.width();var i=S(r,n);var s=i&&i.id;l(s)};var a=e.adaptive.setAuto=function(e){if(t!=e){t=Boolean(e)}};var f=function(t,n){var r=$jobj(t).attr("src",n);if(n.indexOf(".png")>-1)e.utils.fixPng(r[0])};var l=function(t){var n=e.adaptive.currentViewId;if(typeof n=="undefined")n="";if(typeof t=="undefined")t="";if(t==n)return;e("*").each(function(t,n){if(t.type!="treeNodeObject")return;if(!t.hasOwnProperty("isExpanded"))return;var r=e("#"+n);var i=t.isExpanded;r.expanded(i)});$axure("*").each(function(t,n){var r=document.getElementById(n);if(r&&!t.isContained){r.style.top="";r.style.left="";e.dynamicPanelManager.resetFixedPanel(t,r);e.dynamicPanelManager.resetAdaptivePercentPanel(t,r)}});e.adaptive.currentViewId=t;if(n){e.style.clearAdaptiveStyles();$("*").removeClass(n)}if(!t){v("",$axure("*"));$axure("*").each(function(t,n){var r=t.images;if(t.type=="horizontalLine"||t.type=="verticalLine"){var i=r["start~"];f(n+"_start",i);var s=r["end~"];f(n+"_end",s);var o=r["line~"];f(n+"_line",o)}else{if(!r)return;if(e.style.IsWidgetDisabled(n)){var u=e.style.getElementImageOverride(n,"disabled")||r["disabled~"];if(u)e.style.applyImage(n,u,"disabled");return}if(e.style.IsWidgetSelected(n)){var a=e.style.getElementImageOverride(n,"selected")||r["selected~"];if(a)e.style.applyImage(n,a,"selected");return}e.style.applyImage(n,e.style.getElementImageOverride(n,"normal")||r["normal~"])}var l=$jobj(n).children(".text");if(l.length)e.style.transformTextWithVerticalAlignment(l[0].id,function(){})});e.visibility.resetLimboAndHiddenToDefaults();e.repeater.refreshAllRepeaters();e.dynamicPanelManager.updateAllFitPanels();e.dynamicPanelManager.updatePercentPanelCache(e("*"))}else{e.visibility.clearLimboAndHidden();b(t);e.repeater.refreshAllRepeaters()}e.adaptive.triggerEvent("viewChanged",{});if(o)e.viewChangePageAndMasters()};var c="borderWidth";var h="colorStyle";var p="sketchFactor";var d=function(t){var n=m(t);var r=e.pageData.page;var i=r.adaptiveStyles;var s=[];for(var o=n.length-1;o>=-1;o--){var u=o==-1?r.style:i[n[o]];if(s.indexOf(c)==-1&&u.hasOwnProperty(c)){if(u[c]!=0)return true;s.push(c)}if(s.indexOf(h)==-1&&u.hasOwnProperty(h)){if(u[h]!="appliedColor")return true;s.push(h)}if(s.indexOf(p)==-1&&u.hasOwnProperty(p)){if(u[p]!=0)return true;s.push(p)}}return false};var v=function(t,n){var r=d(t)?"addClass":"removeClass";n.each(function(t,n){var i=$jobj(e.repeater.applySuffixToElementId(n,"_input"));if(i.length==0)return;i[r]("form_sketch")})};var m=e.adaptive.getAdaptiveIdChain=function(e){if(!e)return[];var t=r[e];var n=[];var i=t;while(i){n[n.length]=i.id;i=r[i.baseViewId]}return n.reverse()};var g=e.adaptive.getPageStyle=function(){var t=e.adaptive.currentViewId;var n=m(t);var r=$.extend({},e.pageData.page.style);for(var i=0;i<n.length;i++){var s=n[i];$.extend(r,e.pageData.page.adaptiveStyles[s])}return r};var y=function(e,t,n){for(var r=n.length-1;r>=0;r--){var i=n[r];var s=t["start~"+i];if(s){f(e+"_start",s);var o=t["end~"+i];f(e+"_end",o);var u=t["line~"+i];f(e+"_line",u);break}}};var b=e.adaptive.applyView=function(t,n){var r={};var i={};var s;if(n){s=n.jQuery();s=s.add(s.find("*"));var o=e.annotation.jQueryAnn(n);s=s.add(o)}else{s=$("*");n=e("*")}s.addClass(t);v(t,n);var u=m(t);n.each(function(e,n){w(e,n,u,t,r,i)});e.visibility.addLimboAndHiddenIds(r,i,n);e.dynamicPanelManager.updateAllFitPanels();e.dynamicPanelManager.updatePercentPanelCache(n)};var w=function(t,n,r,i,s,o){var u=[];for(var a=0;a<r.length;a++){var i=r[a];var f=t.adaptiveStyles[i];if(f)u[u.length]=f}var l=e.style.generateState(n);var c=t.images;if(c){if(t.type=="horizontalLine"||t.type=="verticalLine"){y(n,c,r)}else{var h=E(n,c,r,l);if(h)e.style.applyImage(n,h,l)}}var p=e.style.computeAllOverrides(n,undefined,l,i);var d=$.extend({},t.style,p);if(!t.isContained){e.style.setAdaptiveStyle(n,p)}if(d.limbo&&!t.isContained)s[n]=true;if(d.visible===false)o[n]=true};var E=function(t,n,r,i){var s=e.style.getElementImageOverride(t,i);if(s)return s;if(!n)return undefined;for(var o=r.length-1;o>=0;o--){var u=r[o];var a=n[i+"~"+u];if(a)return a}var f=n[i+"~"];if(f)return f;i=e.style.progessState(i);if(i)return E(t,n,r,i);return n["normal~"]};e.adaptive.getImageForStateAndView=function(t,n){var r=m(e.adaptive.currentViewId);var i=e.getObjectFromElementId(t);var s=i.images;return E(t,s,r,n)};var S=function(e,t){var n=function(e,t){return e.size.width>t.size.width||e.size.width==t.size.width&&e.size.height>t.size.height};var r=function(e,t){var n=t.size.width||1e6;var r=t.size.height||1e6;var i=e.size.width||1e6;var s=e.size.height||1e6;return i<n||i==n&&s<r};var s=function(e,t,n){return t>=e.size.width&&n>=e.size.height};var o=function(e,t,n){var r=e.size.width||1e6;var i=e.size.height||1e6;return t<=r&&n<=i};var u=undefined;var a=undefined;for(var f=0;f<i.length;f++){var l=i[f];if(l.condition==">="){if(s(l,e,t)){if(!u||n(l,u))u=l}}else{if(o(l,e,t)){if(!a||r(l,a))a=l}}}return a||u};var x=function(){return typeof r!="undefined"};e.messageCenter.addMessageListener(function(e,t){if(e=="switchAdaptiveView"){var n=window.location.href.split("#")[0];var r=n.lastIndexOf("/");n=n.substring(r+1);if(n!=t.src)return;var i=t.view=="auto"?undefined:t.view=="default"?"":t.view;if(!x()){s=i}else T(i)}});e.adaptive.initialize=function(){n=e.document.adaptiveViews;r={};if(n&&n.length>0){for(var t=0;t<n.length;t++){var o=n[t];r[o.id]=o}var a=e.document.configuration.enabledViewIds;for(var t=0;t<a.length;t++){i[i.length]=r[a[t]]}T(s)}$axure.resize(function(t){u();e.postResize(t)})};var T=function(e){if(typeof e!="undefined"){a(false);l(e!="default"?e:"")}else{a(true);u()}}})