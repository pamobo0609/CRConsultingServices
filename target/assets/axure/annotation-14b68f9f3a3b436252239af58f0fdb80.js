$axure.internal(function(e){var t=10;var n=e.annotation={};var r=e.annotation.updateLinkLocations=function(n){var r=e.getObjectFromElementId(n);var i=r&&r.style.rotation;var s=e.style.GetShapeIdFromText(n);if(WEBKIT&&i){$("#"+s).css("-webkit-transform","scale(1)");$("#"+n).css("-webkit-transform","scale(1)")}$("#"+n).find('span[id$="_ann"]').each(function(e,n){var r=n.id.replace("_ann","");var i=$(n).position();var s=i.left-t;var o=i.top;$("#"+r+"Note").css("left",s).css("top",o)});if(WEBKIT&&i){$("#"+s).css("-webkit-transform","");$("#"+n).css("-webkit-transform","")}};var i={};e.annotation.ToggleWorkflow=function(t,n,r,s){if(i[n]){var o=i[n];i[n]=undefined;if(o.dialog("isOpen")){o.dialog("close");return}}var u=$(window);var a=u.scrollTop();var f=u.scrollLeft();var l=10;var c=10;var h=false;var p=false;var d=t.pageY-a;var v=t.pageX-f;if(v>r+l){h=true}if(d>s+c){p=true}var m=0;var g=0;if(p)m=d-s-20;else m=d+10;if(h)g=v-r-4;else g=v-6;e.globals.MaxZIndex=e.globals.MaxZIndex+1;if(IE)s+=50;var y=e.getObjectFromElementId(n);var b=y.annotation;var o=$("<div></div>").appendTo("body").html(e.legacy.GetAnnotationHtml(b)).dialog({title:y.label,width:r,height:s,minHeight:150,zIndex:e.globals.MaxZIndex,position:[g,m],dialogClass:"dialogFix",autoOpen:false});o.parent().appendTo("#base");o.dialog("open");i[n]=o;window.scrollTo(f,a)};e.annotation.InitializeAnnotations=function(t){t.each(function(t,n){if(!t.annotation)return;if(t.type=="hyperlink"){var i=e.style.GetTextIdFromLink(n);var s=$("#"+n);s.after("<span id='"+n+"_ann'>&#8203;</span>");if(e.document.configuration.useLabels){var o=$("#"+n).attr("data-label");if(!o||o=="")o="?";$("#"+i).append("<div id='"+n+"Note' class='annnotelabel' >"+o+"</div>")}else{$("#"+i).append("<div id='"+n+"Note' class='annnoteimage' ></div>")}$("#"+n+"Note").click(function(t){e.annotation.ToggleWorkflow(t,n,300,150,false);return false});r(i)}else{if(e.document.configuration.useLabels){var o=$("#"+n).attr("data-label");if(!o||o=="")o="?";$("#"+n+"_ann").append("<div id='"+n+"Note' class='annnotelabel'>"+o+"</div>")}else{$("#"+n+"_ann").append("<div id='"+n+"Note' class='annnoteimage'></div>")}$("#"+n+"Note").click(function(t){e.annotation.ToggleWorkflow(t,n,300,150,false);return false})}})};e.annotation.jQueryAnn=function(e){var t=[];e.each(function(e,n){if(e.annotation)t[t.length]=n});var n=jQuery.map(t,function(e){return"#"+e+"_ann"});var r=n.length>0?n.join(", "):"";return $(r)};$(window.document).ready(function(){e.annotation.InitializeAnnotations(e(function(e){return e.annotation}));e.messageCenter.addMessageListener(function(e,t){if(e=="annotationToggle"){if(t==false){for(var n in i){var r=i[n];if(r.dialog("isOpen")){r.dialog("close")}}}}})})})